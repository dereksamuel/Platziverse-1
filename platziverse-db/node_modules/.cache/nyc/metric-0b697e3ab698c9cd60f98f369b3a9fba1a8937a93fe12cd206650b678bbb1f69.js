'use strict';function cov_zf6hr88aw(){var path="/home/derek/Documentos/BACKEND_NODEJS/platziverse-db/lib/services/metric.js";var hash="0b51d08ad0be523e0ec97035d2eafeb57edfe96d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/derek/Documentos/BACKEND_NODEJS/platziverse-db/lib/services/metric.js",statementMap:{"0":{start:{line:3,column:0},end:{line:56,column:2}},"1":{start:{line:5,column:4},end:{line:5,column:35}},"2":{start:{line:6,column:4},end:{line:6,column:33}},"3":{start:{line:10,column:4},end:{line:21,column:7}},"4":{start:{line:25,column:4},end:{line:40,column:7}},"5":{start:{line:44,column:23},end:{line:44,column:73}},"6":{start:{line:45,column:4},end:{line:45,column:30}},"7":{start:{line:47,column:4},end:{line:54,column:5}},"8":{start:{line:48,column:6},end:{line:48,column:34}},"9":{start:{line:49,column:6},end:{line:49,column:56}},"10":{start:{line:50,column:21},end:{line:50,column:58}},"11":{start:{line:51,column:6},end:{line:51,column:29}},"12":{start:{line:53,column:6},end:{line:53,column:18}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:2},end:{line:4,column:3}},loc:{start:{line:4,column:39},end:{line:7,column:3}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:2},end:{line:9,column:3}},loc:{start:{line:9,column:31},end:{line:22,column:3}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:40},end:{line:41,column:3}},line:24},"3":{name:"(anonymous_3)",decl:{start:{line:43,column:2},end:{line:43,column:3}},loc:{start:{line:43,column:35},end:{line:55,column:3}},line:43}},branchMap:{"0":{loc:{start:{line:47,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:47,column:4},end:{line:54,column:5}},{start:{line:47,column:4},end:{line:54,column:5}}],line:47}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"0b51d08ad0be523e0ec97035d2eafeb57edfe96d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_zf6hr88aw=function(){return actualCoverage;};}return actualCoverage;}cov_zf6hr88aw();cov_zf6hr88aw().s[0]++;module.exports=class SetupMetricService{constructor(MetricModel,AgentModel){cov_zf6hr88aw().f[0]++;cov_zf6hr88aw().s[1]++;this.MetricModel=MetricModel;cov_zf6hr88aw().s[2]++;this.AgentModel=AgentModel;}async findByAgentUuid(uuid){cov_zf6hr88aw().f[1]++;cov_zf6hr88aw().s[3]++;return this.MetricModel.findAll({attributes:['type'],// array con alias
group:['type'],include:[{attributes:[],//model: this.AgentModel,
where:{uuid}}],raw:true// solo en js o en JSON
});}async findByTypeAgentUuid(type,uuid){cov_zf6hr88aw().f[2]++;cov_zf6hr88aw().s[4]++;return this.MetricModel.findAll({attributes:['id','type','value','creadedAt'],where:{type},limit:15,order:[['createdAt','DESC']],include:[{attributes:[],//model: this.AgentModel,
where:{uuid}}],raw:true});}async createMetric(uuid,metric){cov_zf6hr88aw().f[3]++;const agentExist=(cov_zf6hr88aw().s[5]++,await this.AgentModel.findOne({where:{uuid}}));cov_zf6hr88aw().s[6]++;console.log('no me abre');cov_zf6hr88aw().s[7]++;if(agentExist){cov_zf6hr88aw().b[0][0]++;cov_zf6hr88aw().s[8]++;console.log('Estoy dentro');cov_zf6hr88aw().s[9]++;Object.assign(metric,{agentId:agentExist.id});// metric.agentId = agentExist.id
const result=(cov_zf6hr88aw().s[10]++,await this.MetricModel.create(metric));cov_zf6hr88aw().s[11]++;return result.toJSON();}else{cov_zf6hr88aw().b[0][1]++;cov_zf6hr88aw().s[12]++;return null;}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1ldHJpYy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiU2V0dXBNZXRyaWNTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJNZXRyaWNNb2RlbCIsIkFnZW50TW9kZWwiLCJmaW5kQnlBZ2VudFV1aWQiLCJ1dWlkIiwiZmluZEFsbCIsImF0dHJpYnV0ZXMiLCJncm91cCIsImluY2x1ZGUiLCJ3aGVyZSIsInJhdyIsImZpbmRCeVR5cGVBZ2VudFV1aWQiLCJ0eXBlIiwibGltaXQiLCJvcmRlciIsImNyZWF0ZU1ldHJpYyIsIm1ldHJpYyIsImFnZW50RXhpc3QiLCJmaW5kT25lIiwiY29uc29sZSIsImxvZyIsIk9iamVjdCIsImFzc2lnbiIsImFnZW50SWQiLCJpZCIsInJlc3VsdCIsImNyZWF0ZSIsInRvSlNPTiJdLCJtYXBwaW5ncyI6IkFBQUEsYSxrckVBZVk7Z0hBYlpBLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixLQUFNQyxDQUFBQSxrQkFBbUIsQ0FDeENDLFdBQVcsQ0FBQ0MsV0FBRCxDQUFjQyxVQUFkLENBQTBCLCtDQUNuQyxLQUFLRCxXQUFMLENBQW1CQSxXQUFuQixDQURtQyx1QkFFbkMsS0FBS0MsVUFBTCxDQUFrQkEsVUFBbEIsQ0FDRCxDQUVELEtBQU1DLENBQUFBLGVBQU4sQ0FBdUJDLElBQXZCLENBQTZCLCtDQUMzQixNQUFPLE1BQUtILFdBQUwsQ0FBaUJJLE9BQWpCLENBQXlCLENBQzlCQyxVQUFVLENBQUUsQ0FBRSxNQUFGLENBRGtCLENBQ047QUFDeEJDLEtBQUssQ0FBRSxDQUFFLE1BQUYsQ0FGdUIsQ0FHOUJDLE9BQU8sQ0FBRSxDQUFDLENBQ1JGLFVBQVUsQ0FBRSxFQURKLENBRVI7QUFDQUcsS0FBSyxDQUFFLENBQ0xMLElBREssQ0FIQyxDQUFELENBSHFCLENBVTlCTSxHQUFHLENBQUUsSUFBSTtBQVZxQixDQUF6QixDQUFQLENBWUQsQ0FFRCxLQUFNQyxDQUFBQSxtQkFBTixDQUEwQkMsSUFBMUIsQ0FBZ0NSLElBQWhDLENBQXNDLCtDQUNwQyxNQUFPLE1BQUtILFdBQUwsQ0FBaUJJLE9BQWpCLENBQXlCLENBQzlCQyxVQUFVLENBQUUsQ0FBRSxJQUFGLENBQVEsTUFBUixDQUFnQixPQUFoQixDQUF5QixXQUF6QixDQURrQixDQUU5QkcsS0FBSyxDQUFFLENBQ0xHLElBREssQ0FGdUIsQ0FLOUJDLEtBQUssQ0FBRSxFQUx1QixDQU05QkMsS0FBSyxDQUFFLENBQUMsQ0FBRSxXQUFGLENBQWUsTUFBZixDQUFELENBTnVCLENBTzlCTixPQUFPLENBQUUsQ0FBQyxDQUNSRixVQUFVLENBQUUsRUFESixDQUVSO0FBQ0FHLEtBQUssQ0FBRSxDQUNMTCxJQURLLENBSEMsQ0FBRCxDQVBxQixDQWM5Qk0sR0FBRyxDQUFFLElBZHlCLENBQXpCLENBQVAsQ0FnQkQsQ0FFRCxLQUFNSyxDQUFBQSxZQUFOLENBQW1CWCxJQUFuQixDQUF5QlksTUFBekIsQ0FBaUMsd0JBQy9CLEtBQU1DLENBQUFBLFVBQVUseUJBQUcsS0FBTSxNQUFLZixVQUFMLENBQWdCZ0IsT0FBaEIsQ0FBd0IsQ0FBRVQsS0FBSyxDQUFFLENBQUVMLElBQUYsQ0FBVCxDQUF4QixDQUFULENBQWhCLENBRCtCLHVCQUUvQmUsT0FBTyxDQUFDQyxHQUFSLENBQVksWUFBWixFQUYrQix1QkFJL0IsR0FBSUgsVUFBSixDQUFnQixrREFDZEUsT0FBTyxDQUFDQyxHQUFSLENBQVksY0FBWixFQURjLHVCQUVkQyxNQUFNLENBQUNDLE1BQVAsQ0FBY04sTUFBZCxDQUFzQixDQUFFTyxPQUFPLENBQUVOLFVBQVUsQ0FBQ08sRUFBdEIsQ0FBdEIsRUFBa0Q7QUFDbEQsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRyxLQUFNLE1BQUt4QixXQUFMLENBQWlCeUIsTUFBakIsQ0FBd0JWLE1BQXhCLENBQVQsQ0FBWixDQUhjLHdCQUlkLE1BQU9TLENBQUFBLE1BQU0sQ0FBQ0UsTUFBUCxFQUFQLENBQ0QsQ0FMRCxJQUtPLG1EQUNMLE1BQU8sS0FBUCxDQUNELENBQ0YsQ0FwRHVDLENBQTFDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFNldHVwTWV0cmljU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKE1ldHJpY01vZGVsLCBBZ2VudE1vZGVsKSB7XG4gICAgdGhpcy5NZXRyaWNNb2RlbCA9IE1ldHJpY01vZGVsO1xuICAgIHRoaXMuQWdlbnRNb2RlbCA9IEFnZW50TW9kZWw7XG4gIH1cblxuICBhc3luYyBmaW5kQnlBZ2VudFV1aWQgKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5NZXRyaWNNb2RlbC5maW5kQWxsKHtcbiAgICAgIGF0dHJpYnV0ZXM6IFsgJ3R5cGUnIF0sIC8vIGFycmF5IGNvbiBhbGlhc1xuICAgICAgZ3JvdXA6IFsgJ3R5cGUnIF0sXG4gICAgICBpbmNsdWRlOiBbe1xuICAgICAgICBhdHRyaWJ1dGVzOiBbXSxcbiAgICAgICAgLy9tb2RlbDogdGhpcy5BZ2VudE1vZGVsLFxuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHV1aWRcbiAgICAgICAgfVxuICAgICAgfV0sXG4gICAgICByYXc6IHRydWUvLyBzb2xvIGVuIGpzIG8gZW4gSlNPTlxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5VHlwZUFnZW50VXVpZCh0eXBlLCB1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuTWV0cmljTW9kZWwuZmluZEFsbCh7XG4gICAgICBhdHRyaWJ1dGVzOiBbICdpZCcsICd0eXBlJywgJ3ZhbHVlJywgJ2NyZWFkZWRBdCcgXSxcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHR5cGVcbiAgICAgIH0sXG4gICAgICBsaW1pdDogMTUsXG4gICAgICBvcmRlcjogW1sgJ2NyZWF0ZWRBdCcsICdERVNDJyBdXSxcbiAgICAgIGluY2x1ZGU6IFt7XG4gICAgICAgIGF0dHJpYnV0ZXM6IFtdLFxuICAgICAgICAvL21vZGVsOiB0aGlzLkFnZW50TW9kZWwsXG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgdXVpZFxuICAgICAgICB9XG4gICAgICB9XSxcbiAgICAgIHJhdzogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlTWV0cmljKHV1aWQsIG1ldHJpYykge1xuICAgIGNvbnN0IGFnZW50RXhpc3QgPSBhd2FpdCB0aGlzLkFnZW50TW9kZWwuZmluZE9uZSh7IHdoZXJlOiB7IHV1aWQgfSB9KTtcbiAgICBjb25zb2xlLmxvZygnbm8gbWUgYWJyZScpO1xuXG4gICAgaWYgKGFnZW50RXhpc3QpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFc3RveSBkZW50cm8nKTtcbiAgICAgIE9iamVjdC5hc3NpZ24obWV0cmljLCB7IGFnZW50SWQ6IGFnZW50RXhpc3QuaWQgfSk7Ly8gbWV0cmljLmFnZW50SWQgPSBhZ2VudEV4aXN0LmlkXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLk1ldHJpY01vZGVsLmNyZWF0ZShtZXRyaWMpO1xuICAgICAgcmV0dXJuIHJlc3VsdC50b0pTT04oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59O1xuIl19